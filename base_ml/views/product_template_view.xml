<?xml version="1.0"?>
<odoo>
    <record id="product_template_view_form_inherit_ml" model="ir.ui.view">
        <field name="name">product.template.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page[last()]" position="after">
                <page string="Mercado Libre" groups="base.group_system" attrs="{'invisible': [('product_variant_count', '&gt;', 1)]}">
                    <group>
                        <group>
                            <field name="item_type"/>
                        </group>
                    </group>
                    <group>
                        <group name="ml_fields">
                            <field name="id_item" attrs="{'invisible': [('item_type', '=', False)], 'required': [('item_type', '!=', False)]}"/>
                            <field name="id_variation" attrs="{'invisible': ['|', ('item_type', '=', '1'), ('item_type', '=', False)],
                                                        'required': [('item_type', '=', '2')]}"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
    <!--Inherit Tree-->
    <record id="product_template_view_tree_inherit_ml" model="ir.ui.view">
        <field name="name">product.template.tree</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='barcode']" position="after">
                <field name="id_item" optional="hide"/>
            </xpath>
        </field>
    </record>
    <!--Search-->
    <record id="product_template_view_search_inherit_ml" model="ir.ui.view">
        <field name="name">product.template.search</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_search_view"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[3]" position="before">
                <separator/>
                <filter string="Disponible en Mercado Libre" name="filter_to_ml" domain="[('item_type', '!=', False)]"/>
            </xpath>
        </field>
    </record>
</odoo>
